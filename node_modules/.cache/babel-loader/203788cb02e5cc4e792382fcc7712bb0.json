{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rstrasser\\\\Desktop\\\\My Stuff\\\\Seminars\\\\Sites\\\\fiservseminars\\\\src\\\\containers\\\\Profile\\\\components\\\\photoUpload.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Amplify, { Auth, Storage } from 'aws-amplify';\nimport { useFormFields } from \"../../../libs/hooksLib\";\nimport { onError } from \"../../../libs/errorLib\";\nimport config from '../../../aws-config';\n/* Amplify.configure({\r\n  \"aws_appsync_graphqlEndpoint\": \"https://qssh4niq5bgujocnsbpv2zg7am.appsync-api.us-east-1.amazonaws.com/graphql\",\r\n  \"aws_appsync_region\": \"us-east-1\",\r\n  \"aws_appsync_authenticationType\": \"AMAZON_COGNITO_USER_POOLS\",\r\n  Auth: {\r\n    region: config.aws_cognito_region,\r\n    userPoolId: config.aws_user_pools_id,\r\n    identityPoolId: config.aws_cognito_identity_pool_id,\r\n    userPoolWebClientId: config.aws_user_pools_client_id\r\n  },    \r\n  Storage: {\r\n    bucket: config.aws_s3_bucket, //REQUIRED -  Amazon S3 bucket\r\n    region: config.aws_s3_bucket_region, //OPTIONAL -  Amazon service region\r\n    identityPoolId: config.aws_cognito_identity_pool_id\r\n  }\r\n}); */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nStorage.configure({\n  track: true,\n  level: \"private\"\n});\nexport default function PhotoUpload() {\n  _s();\n\n  const [uploaded, setUploaded] = useState(false);\n  const [image, setImage] = useState([]);\n  const [username, setUsername] = useState(null);\n  const [removeImage, setRemoveImage] = useState([]);\n  let fileInput = /*#__PURE__*/React.createRef();\n  useEffect(() => {\n    async function getUsername() {\n      const user = await Auth.currentUserInfo();\n      const username = user.username;\n      setUsername(username);\n    }\n\n    getUsername();\n  }, []);\n\n  const onOpenFileDialog = () => {\n    fileInput.current.click();\n  };\n\n  const onProcessFile = e => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    try {\n      reader.readAsDataURL(file);\n    } catch (err) {\n      console.log(err);\n    }\n\n    reader.onloadend = () => {\n      setImage(reader.result);\n    };\n\n    Storage.put($`profile.png`, file, {\n      level: \"private\",\n      contentType: \"image/png\"\n    }).then(result => console.log(result)).catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    onPageRendered();\n  }, []);\n\n  const onPageRendered = async () => {\n    getProfilePicture();\n  };\n\n  const getProfilePicture = () => {\n    Storage.get(`profile.png`).then(url => {\n      var myRequest = new Request(url);\n      fetch(myRequest).then(function (response) {\n        if (response.status === 200) {\n          setImage(url);\n        }\n      });\n    }).catch(err => console.log(err));\n  };\n\n  const onRemoveFile = e => {\n    Storage.remove('profile.png', {\n      level: 'private'\n    }).then(result => console.log(result), removeImage()).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"#\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: onProcessFile,\n        ref: fileInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: image,\n      height: \"200px\",\n      style: {\n        display: removeImage ? 'block' : 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PhotoUpload, \"MV+hEb3yGBMfwxvpIu2WP+ST3hY=\");\n\n_c = PhotoUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"PhotoUpload\");","map":{"version":3,"sources":["C:/Users/rstrasser/Desktop/My Stuff/Seminars/Sites/fiservseminars/src/containers/Profile/components/photoUpload.js"],"names":["React","useState","useEffect","Amplify","Auth","Storage","useFormFields","onError","config","configure","track","level","PhotoUpload","uploaded","setUploaded","image","setImage","username","setUsername","removeImage","setRemoveImage","fileInput","createRef","getUsername","user","currentUserInfo","onOpenFileDialog","current","click","onProcessFile","e","preventDefault","reader","FileReader","file","target","files","readAsDataURL","err","console","log","onloadend","result","put","$","contentType","then","catch","onPageRendered","getProfilePicture","get","url","myRequest","Request","fetch","response","status","onRemoveFile","remove","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Amplify, { Auth, Storage } from 'aws-amplify';\r\nimport { useFormFields } from \"../../../libs/hooksLib\";\r\nimport { onError } from \"../../../libs/errorLib\";\r\n\r\nimport config from '../../../aws-config';\r\n\r\n/* Amplify.configure({\r\n  \"aws_appsync_graphqlEndpoint\": \"https://qssh4niq5bgujocnsbpv2zg7am.appsync-api.us-east-1.amazonaws.com/graphql\",\r\n  \"aws_appsync_region\": \"us-east-1\",\r\n  \"aws_appsync_authenticationType\": \"AMAZON_COGNITO_USER_POOLS\",\r\n  Auth: {\r\n    region: config.aws_cognito_region,\r\n    userPoolId: config.aws_user_pools_id,\r\n    identityPoolId: config.aws_cognito_identity_pool_id,\r\n    userPoolWebClientId: config.aws_user_pools_client_id\r\n  },    \r\n  Storage: {\r\n    bucket: config.aws_s3_bucket, //REQUIRED -  Amazon S3 bucket\r\n    region: config.aws_s3_bucket_region, //OPTIONAL -  Amazon service region\r\n    identityPoolId: config.aws_cognito_identity_pool_id\r\n  }\r\n}); */\r\n\r\nStorage.configure({ track: true, level: \"private\" });\r\n\r\nexport default function PhotoUpload() {\r\n  const [uploaded, setUploaded] = useState(false);\r\n  const [image, setImage] = useState([]);\r\n  const [username, setUsername] = useState(null);\r\n  const [removeImage, setRemoveImage] = useState([]);\r\n\r\n  let fileInput = React.createRef();\r\n\r\n\r\n  useEffect(() => {\r\n    async function getUsername() {\r\n        const user = await Auth.currentUserInfo();\r\n        const username = user.username\r\n        setUsername(username);\r\n    }\r\n    getUsername();\r\n }, [])\r\n\r\n  const onOpenFileDialog = () => {\r\n    fileInput.current.click();\r\n  };\r\n\r\n  const onProcessFile = e => {\r\n    e.preventDefault();\r\n    let reader = new FileReader();\r\n    let file = e.target.files[0];\r\n    try {\r\n      reader.readAsDataURL(file);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    reader.onloadend = () => {\r\n      setImage(reader.result);\r\n    };\r\n    Storage.put($`profile.png`, file, {\r\n      level: \"private\",\r\n      contentType: \"image/png\"\r\n    })\r\n      .then(result => console.log(result))\r\n      .catch(err => console.log(err));\r\n  };\r\n  useEffect(() => {\r\n    onPageRendered();\r\n  }, []);\r\n\r\n  const onPageRendered = async () => {\r\n    getProfilePicture();\r\n  };\r\n  \r\n  const getProfilePicture = () => {\r\n    Storage.get(`profile.png`)\r\n      .then(url => {\r\n        var myRequest = new Request(url);\r\n        fetch(myRequest).then(function(response) {\r\n          if (response.status === 200) {\r\n            setImage(url);\r\n          }\r\n        });\r\n      })\r\n      .catch(err => console.log(err));\r\n      \r\n  };\r\n\r\n  const onRemoveFile = e => {\r\n    Storage.remove('profile.png', {level: 'private'})\r\n    .then(\r\n      result => console.log(result),\r\n      removeImage()\r\n    )\r\n    .catch(err => console.log(err));\r\n      \r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <a href=\"#\">\r\n        <input\r\n            type=\"file\"\r\n            onChange={onProcessFile}\r\n            ref={fileInput}\r\n        />\r\n      </a>\r\n      {/* <button onClick={onRemoveFile}>Remove Photo</button> */}\r\n      <img src={image} height=\"200px\" style={{display: removeImage ? 'block' : 'none' }}/>\r\n    </div>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}