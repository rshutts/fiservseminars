{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rstrasser\\\\Desktop\\\\My Stuff\\\\Seminars\\\\Sites\\\\fiservseminars\\\\src\\\\containers\\\\Profile\\\\components\\\\photoUpload.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Amplify, { Auth, Storage } from 'aws-amplify';\nimport { useFormFields } from \"../../../libs/hooksLib\";\nimport { onError } from \"../../../libs/errorLib\";\nimport config from '../../../aws-config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nAmplify.configure({\n  \"aws_appsync_graphqlEndpoint\": \"https://qssh4niq5bgujocnsbpv2zg7am.appsync-api.us-east-1.amazonaws.com/graphql\",\n  \"aws_appsync_region\": \"us-east-1\",\n  \"aws_appsync_authenticationType\": \"AMAZON_COGNITO_USER_POOLS\",\n  Auth: {\n    region: config.aws_cognito_region,\n    userPoolId: config.aws_user_pools_id,\n    identityPoolId: config.aws_cognito_identity_pool_id,\n    userPoolWebClientId: config.aws_user_pools_client_id\n  },\n  Storage: {\n    bucket: config.aws_s3_bucket,\n    //REQUIRED -  Amazon S3 bucket\n    region: config.aws_s3_bucket_region,\n    //OPTIONAL -  Amazon service region\n    identityPoolId: config.aws_cognito_identity_pool_id\n  }\n});\nStorage.configure({\n  track: true,\n  level: \"private\"\n});\nexport default function PhotoUpload() {\n  _s();\n\n  const [uploaded, setUploaded] = useState(false);\n  const [image, setImage] = useState([]);\n  const [username, setUsername] = useState(null);\n  const [removeImage, setRemoveImage] = useState([]);\n  let fileInput = /*#__PURE__*/React.createRef();\n  useEffect(() => {\n    async function getUsername() {\n      const user = await Auth.currentUserInfo();\n      const username = user.username;\n      setUsername(username);\n    }\n\n    getUsername();\n  }, []);\n\n  const onOpenFileDialog = () => {\n    fileInput.current.click();\n  };\n\n  const onProcessFile = e => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    try {\n      reader.readAsDataURL(file);\n    } catch (err) {\n      console.log(err);\n    }\n\n    reader.onloadend = () => {\n      setImage(reader.result);\n    };\n\n    Storage.put(`profile.png`, file, {\n      level: \"private\",\n      contentType: \"image/png\"\n    }).then(result => console.log(result)).catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    onPageRendered();\n  }, []);\n\n  const onPageRendered = async () => {\n    getProfilePicture();\n  };\n\n  const getProfilePicture = () => {\n    Storage.get(`profile.png`).then(url => {\n      var myRequest = new Request(url);\n      fetch(myRequest).then(function (response) {\n        if (response.status === 200) {\n          setImage(url);\n        }\n      });\n    }).catch(err => console.log(err));\n  };\n\n  const onRemoveFile = e => {\n    Storage.remove('profile.png', {\n      level: 'private'\n    }).then(result => console.log(result), removeImage()).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"#\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: onProcessFile,\n        ref: fileInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onRemoveFile,\n      children: \"Remove Photo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: image,\n      height: \"200px\",\n      style: {\n        display: removeImage ? 'block' : 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PhotoUpload, \"MV+hEb3yGBMfwxvpIu2WP+ST3hY=\");\n\n_c = PhotoUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"PhotoUpload\");","map":{"version":3,"sources":["C:/Users/rstrasser/Desktop/My Stuff/Seminars/Sites/fiservseminars/src/containers/Profile/components/photoUpload.js"],"names":["React","useState","useEffect","Amplify","Auth","Storage","useFormFields","onError","config","configure","region","aws_cognito_region","userPoolId","aws_user_pools_id","identityPoolId","aws_cognito_identity_pool_id","userPoolWebClientId","aws_user_pools_client_id","bucket","aws_s3_bucket","aws_s3_bucket_region","track","level","PhotoUpload","uploaded","setUploaded","image","setImage","username","setUsername","removeImage","setRemoveImage","fileInput","createRef","getUsername","user","currentUserInfo","onOpenFileDialog","current","click","onProcessFile","e","preventDefault","reader","FileReader","file","target","files","readAsDataURL","err","console","log","onloadend","result","put","contentType","then","catch","onPageRendered","getProfilePicture","get","url","myRequest","Request","fetch","response","status","onRemoveFile","remove","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Amplify, { Auth, Storage } from 'aws-amplify';\r\nimport { useFormFields } from \"../../../libs/hooksLib\";\r\nimport { onError } from \"../../../libs/errorLib\";\r\n\r\nimport config from '../../../aws-config';\r\n\r\nAmplify.configure({\r\n  \"aws_appsync_graphqlEndpoint\": \"https://qssh4niq5bgujocnsbpv2zg7am.appsync-api.us-east-1.amazonaws.com/graphql\",\r\n  \"aws_appsync_region\": \"us-east-1\",\r\n  \"aws_appsync_authenticationType\": \"AMAZON_COGNITO_USER_POOLS\",\r\n  Auth: {\r\n    region: config.aws_cognito_region,\r\n    userPoolId: config.aws_user_pools_id,\r\n    identityPoolId: config.aws_cognito_identity_pool_id,\r\n    userPoolWebClientId: config.aws_user_pools_client_id\r\n  },    \r\n  Storage: {\r\n    bucket: config.aws_s3_bucket, //REQUIRED -  Amazon S3 bucket\r\n    region: config.aws_s3_bucket_region, //OPTIONAL -  Amazon service region\r\n    identityPoolId: config.aws_cognito_identity_pool_id\r\n  }\r\n});\r\n\r\nStorage.configure({ track: true, level: \"private\" });\r\n\r\nexport default function PhotoUpload() {\r\n  const [uploaded, setUploaded] = useState(false);\r\n  const [image, setImage] = useState([]);\r\n  const [username, setUsername] = useState(null);\r\n  const [removeImage, setRemoveImage] = useState([]);\r\n\r\n  let fileInput = React.createRef();\r\n\r\n\r\n  useEffect(() => {\r\n    async function getUsername() {\r\n        const user = await Auth.currentUserInfo();\r\n        const username = user.username\r\n        setUsername(username);\r\n    }\r\n    getUsername();\r\n }, [])\r\n\r\n  const onOpenFileDialog = () => {\r\n    fileInput.current.click();\r\n  };\r\n\r\n  const onProcessFile = e => {\r\n    e.preventDefault();\r\n    let reader = new FileReader();\r\n    let file = e.target.files[0];\r\n    try {\r\n      reader.readAsDataURL(file);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    reader.onloadend = () => {\r\n      setImage(reader.result);\r\n    };\r\n    Storage.put(`profile.png`, file, {\r\n      level: \"private\",\r\n      contentType: \"image/png\"\r\n    })\r\n      .then(result => console.log(result))\r\n      .catch(err => console.log(err));\r\n  };\r\n  useEffect(() => {\r\n    onPageRendered();\r\n  }, []);\r\n\r\n  const onPageRendered = async () => {\r\n    getProfilePicture();\r\n  };\r\n  \r\n  const getProfilePicture = () => {\r\n    Storage.get(`profile.png`)\r\n      .then(url => {\r\n        var myRequest = new Request(url);\r\n        fetch(myRequest).then(function(response) {\r\n          if (response.status === 200) {\r\n            setImage(url);\r\n          }\r\n        });\r\n      })\r\n      .catch(err => console.log(err));\r\n      \r\n  };\r\n\r\n  const onRemoveFile = e => {\r\n    Storage.remove('profile.png', {level: 'private'})\r\n    .then(\r\n      result => console.log(result),\r\n      removeImage()\r\n    )\r\n    .catch(err => console.log(err));\r\n      \r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <a href=\"#\">\r\n        <input\r\n            type=\"file\"\r\n            onChange={onProcessFile}\r\n            ref={fileInput}\r\n        />\r\n      </a>\r\n      <button onClick={onRemoveFile}>Remove Photo</button>\r\n      <img src={image} height=\"200px\" style={{display: removeImage ? 'block' : 'none' }}/>\r\n    </div>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}